import{useEffect as e}from"react";const t=e=>"arrowleft"===(e=e.toLowerCase())?"left":"arrowright"===e?"right":"arrowup"===e?"up":"arrowdown"===e?"down":"esc"===e?"escape":"esp"===e||" "===e?"espace":e;export default function(r){e(()=>{const e=Object.entries(r).map(([e,r])=>{const o=e.toLowerCase().split(":"),n=o.pop().split("+").map(t);let s=(o[0]||"BODY").toUpperCase();return"WINDOW"===s&&(s="BODY"),{target:s,keys:n,cb:r}}),o=r=>{const o=r.target===window?window.document.body:r.target,n=t(r.key),s=e.find(({target:e,keys:t})=>{if(!o.matches(e))return!1;for(let e of t){let t=!1;if(e.startsWith("!")&&(t=!0,e=e.slice(1)),e.endsWith("!")&&(t=!0,e=e.slice(0,-1)),e!==n&&r[e+"Key"]!==!t)return!1}return!0});s&&(r.preventDefault(),s.cb(r))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[r])}
